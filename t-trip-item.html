<link rel="import" href="../polymer/polymer.html" />
<link rel="import" href="./t-air-item.html">
<link rel="import" href="./t-hotel-item.html">
<link rel="import" href="./t-activity-item.html">
<link rel="import" href="./t-car-item.html">
<!--
    `t-trip-item` is trip listing item component.
    This component shows information of a single trip.
    It may contain one or more product depending upon booked itineraries.
	
	
Example:
        without event handlers
        <t-trip-api></t-trip-api>

        with data
        <t-list id="list" data-api="result.json" as="item" token-param="bookings" auto>
            <template>
                <t-trip-item trip="{{item}}"></t-trip-item>
            </template>
        </t-list>-->
<dom-module id="t-trip-item">
    <template>
        <div>trip name - {{model.name}}</div>
        <div>model id - {{model.confirmationNumber}}</div>
        <div>delete link</div>
        <div>details link</div>
        <div>status - {{model.bookingStatus}}</div>
        <br>
        <div>
            <template is="dom-repeat" items="{{model.inventoriesInfo}}">
                <template is="dom-if" if="{{_isType(item,'flight')}}">
                    <h3>air</h3>
                    <t-air-item model="{{item}}"></t-air-item>
                    <br>
                </template>
                <template is="dom-if" if="{{_isType(item,'hotel')}}">
                    <br>
                    <h3>hotel</h3>
                    <t-hotel-item model="{{item}}"></t-hotel-item>
                    <br>
                </template>
                <template is="dom-if" if="{{_isType(item,'car')}}">
                    <br>
                    <h3>car</h3>
                    <t-car-item model="{{item}}"></t-car-item>
                    <br>
                </template>
                <template is="dom-if" if="{{_isType(item,'activity')}}">
                    <br>
                    <h3>activity</h3>
                    <t-activity-item model="{{item}}"></t-activity-item>
                    <br>
                </template>
            </template>
        </div>
    </template>
</dom-module>
<script>
Polymer({
    is: "t-trip-item",

    properties: {

        /**
         * trip item.
         * This is required field.
         */
        model: {
            type: Object,
            value: {},
            observer: '_populateModel'
        }
    },

    attached: function() {
        if (!this.model)
            console.error("model not found!");
       /* if (!this.tripProducts)
            this.tripProducts = this.trip.inventoriesInfo;*/
    },

    _populateModel: function() {
        if (!this.model){
            console.error("trip not found!");
            return;
        }

      /*  if (!this.tripProducts.length && this.trip.inventoriesInfo)
            this.tripProducts = this.trip.inventoriesInfo;*/
/*
        this.name = this.trip.name;
        this.tripId = this.trip.confirmationNumber;
        this.status = this.trip.bookingStatus;*/
    },

    _isType: function(product,type){
        if (!product || !product.inventory)
            console.error("inventory not found!");

        return product.inventory.type.toLowerCase() === type;
    }
});
</script>
